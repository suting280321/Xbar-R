<!DOCTYPE HTML>
<html lang="en">
<head>
	  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	  <title>创新方法工作平台</title>
	  <!--添加页面框架-->
	  <link rel="import" id="frame" href="/webresources/common/html/appFrame.html">
	  
	  <!--引入bootstrap-table-->
	  <!--1.引入bootstrap-table.css-->
	  <link rel="stylesheet" href="/webresources/bootstrap/bootstrap-table/bootstrap-table.css"> 
	 
	  <!--2.引入 jQuery 库，bootstrap 库和 bootstrap-table.js-->
	  <script type="text/javascript" src="/webresources/ace-master/assets/js/jquery.dataTables.min.js"></script>
	  <script type="text/javascript" src="/webresources/bootstrap/bootstrap-table/bootstrap-table.js"></script>
	  <script type="text/javascript" src="/webresources/bootstrap/bootstrap-table/locale/bootstrap-table-zh-CN.js"></script>
	  
	  <!-- 引入highcharts -->
	  <script type="text/javascript" src="./js/highcharts/highcharts.js"></script>
	  <script type="text/javascript" src="./js/highcharts/exporting.js"></script>
	  <script type="text/javascript" src="./js/highcharts/oldie.js"></script>
	  <script type="text/javascript" src="./js/highcharts/series-label.js"></script>
	  <script type="text/javascript" src="./js/highcharts/highcharts-zh_CN.js"></script>
	  <script type="text/javascript" src="./js/canvg.min.js"></script>
	  <!-- 导入excel文件 -->
	  <script lang="javascript" src="js/xlsx.full.min.js"></script>
	   <!-- 引入spiner -->
	  <script type="text/javascript" src="js/common/spin.min.js"></script>
	  <!--引入表格编辑js-->
	  <script type="text/javascript" src="js/index.js"></script>
	  <script type="text/javascript" src="js/Xbar-R.js"></script>
	  <script type="text/javascript" src="js/buttonAction.js"></script>
	  <!--静态资源中已经添加的css和js-->
	  <!--<link rel="stylesheet" href="../../ace-master/assets/css/bootstrap.min.css" />-->
	  <!--<link rel="stylesheet" href="../../ace-master/assets/css/ace.min.css" />-->
	  <!--<link rel="stylesheet" href="../../ace-master/assets/font-awesome/4.5.0/css/font-awesome.min.css" />-->
	  <!--<link rel="stylesheet" href="../../ace-master/assets/css/ace-rtl.min.css" />-->
	  <!--<link rel="stylesheet" href="../../ace-master/assets/css/ace-skins.min.css" />-->
	  <!--<link rel="stylesheet" href="../../ace-master/assets/css/fonts.googleapis.com.css" />-->
	  <!--<link rel="stylesheet" href="../../common/css/Extra.css" />-->
	  <!--<link rel="stylesheet" href="../../common/css/searchStyle.css" />-->
	  <!--<script type="text/javascript" src="../../ace-master/assets/js/ace-extra.min.js"></script>-->
	  <!--<script type="text/javascript" src="../../ace-master/assets/js/jquery-2.1.4.min.js"></script>-->
	  <!--<script type="text/javascript" src="../../ace-master/assets/js/ace.min.js"></script>-->
	  <!--<script type="text/javascript" src="../../ace-master/assets/js/bootstrap.min.js"></script>-->
	  <!--<script type="text/javascript" src="../../ace-master/assets/js/jquery.dataTables.min.js"></script>-->
	  <!--<script type="text/javascript" src="../../ace-master/assets/js/jquery.dataTables.bootstrap.min.js"></script>-->
	  <!--<script type="text/javascript" src="../../ace-master/assets/js/jquery-ui.custom.min.js"></script>-->
	  <!--<script type="text/javascript" src="../../ace-master/assets/js/jquery.ui.touch-punch.min.js"></script>-->
	  <!--<script type="text/javascript" src="../../ace-master/assets/js/ace-elements.min.js"></script>-->
	  <!--<script type="text/javascript" src="../../ace-master/assets/js/jquery.mobile.custom.min.js"></script>-->
	  <!--<script type="text/javascript" src="../../common/js/userLogin.js"></script>-->
	  <!--<script type="text/javascript" src="../../common/js/fuzzySearch.js"></script>-->
	  <!--<script type="text/javascript" src="../../common/js/table.js"></script>-->
	  <!--<script type="text/javascript" src="../../common/js/wordEdit.js"></script>-->
</head>
<body class="no-skin">
	<div id="mainFunctionHtml">
		  <div id="myCustomLi">
				<li class="active">
					  <a data-toggle="tab" href="#dataInfo">
							<i class="green ace-icon fa fa-desktop bigger-120"></i>输入数据</a>
				</li>
				<li class="">
					  <a data-toggle="tab" href="#Xbar-R">
							<i class="purple ace-icon fa fa-pencil-square-o bigger-120"></i>Xbar-R图</a>
				</li>
		  </div>
		  <div id="myCustomTab">
				<div class="tab-pane active" id="dataInfo">
					  <div id="toolbar" class="btn-group">
						<a class="btn btn-xs btn-info" onclick="" data-toggle="modal" data-target="#addInfoModal">
							<i class="ace-icon glyphicon glyphicon-plus"></i>
							添加样本
						</a>
						<a class="btn btn-xs btn-info" style="" onclick="caculate()">
							<i class="fa fa-align-justify"></i>
							&nbsp;&nbsp;计算
						</a>
						<button type="button" class="btn btn-xs btn-danger" style="margin-right: 40px" onclick="deleterow()">
							<i class="glyphicon glyphicon-trash"></i>
							删除
						</button>
						<button type="button" class="btn btn-xs btn-info" onclick="downloadexcel()">
							<i class="glyphicon glyphicon-download">文件模板下载</i>
						</button>
						<button type="button" class="btn btn-xs btn-success" data-toggle="modal"
							data-target="#addselectfilemodal">
							<i class="glyphicon glyphicon-import">文件导入</i>
						</button>
					</div>
					<table id="myBootstrapTtable" data-toggle="table" data-search="true" data-show-refresh="true"
						data-show-toggle="true" data-toolbar="#toolbar" data-pagination="true"  class="table table-striped table-bordered  table-sm"
						data-side-pagination="client"  >
						<thead>						
							<tr>
								<th class="col-sm-2 center" data-field="state" data-checkbox="true" rowspan="2" ></th>
								<th class="col-sm-2 center" data-field="procedureIdForDelete" rowspan="2" data-visible="false">procedureId</th>
					            <th class="col-sm-2 center" data-field="procedureId" data-formatter="generateId" rowspan="2">序号</th>
								<th class="col-sm-2 center" data-field="observedValue" colspan="5">观测值</th>
								<th class="col-sm-2 center" data-field="totalNum" rowspan="2">子组样本总和</th>	
								<th class="col-sm-2 center" data-field="averageNum" rowspan="2">子组样本平均数</th>
								<th class="col-sm-2 center" data-field="rangeNum" rowspan="2">子组样本极差</th>
								<th class="col-sm-2 center" data-field="action" data-formatter="actionFormatter" data-events="actionEvents" rowspan="2">编辑</th>
							</tr>
							<tr>
								<th class="col-sm-2 center" data-field="x1">x1</th>
								<th class="col-sm-2 center" data-field="x2">x2</th>
								<th class="col-sm-2 center" data-field="x3">x3</th>
								<th class="col-sm-2 center" data-field="x4">x4</th>
								<th class="col-sm-2 center" data-field="x5">x5</th>
							</tr>
						</thead>				
					</table>
					<br> <br>
				</div>
				<div class="tab-pane" id="Xbar-R">
					<div class="btn-group btn-group-sm">
						<a id="saveProject" class='btn btn-info' onclick='saveExcelData()'>
							<span>
								<i class='ace-icon fa fa-save'></i>
								保存
							</span>
							</a>
							<button id="saveAsProject" type="button" class="btn btn-info" data-toggle="modal" data-target="#saveAsNewProjectModal">
										<span class="glyphicon glyphicon-log-in"></span>另存
							</button>
					</div>
					<div id="analyzeXbarR" style="height:560px;display: block"><!-- display:none -->
						 <div style="float:left;width:100%;margin-top:10px">
							<table id="sampleAnalysisTable" data-height="78" data-toggle="table" style="font-size:13px;"class="table table-hover">
								<thead>
									<tr>									
										<th class="col-sm-1 center"data-field="selectedA2">A2</th>
										<th class="col-sm-1 center"data-field="selectedD3">D3</th>
										<th class="col-sm-1 center"data-field="selectedD4">D4</th>
										<th class="col-sm-1 center"data-field="AverageNum">总样本平均数</th>
										<th class="col-sm-1 center"data-field="RangeNum">总极差平均数</th>
										<th class="col-sm-1 center"data-field="UCLx">总样本平均数的上控制线</th>
										<th class="col-sm-1 center"data-field="LCLx">总样本平均数的下控制线</th>
										<th class="col-sm-1 center"data-field="UCLr">总极差平均数的上控制线</th>
										<th class="col-sm-1 center"data-field="LCLr">总极差平均数的下控制线</th>
									</tr>
								</thead>
							</table>
							<div id="Xbar" style="float:left;width:45%;height:480px">	</div>
						    <div id="R" style="float:left;width:45%;height:480px">	</div>	
						 </div>
					</div>
				</div>
		  </div>
	</div>
	<!--手动添加数据模态框-->
	<div class="modal fade" id="addInfoModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<h4 class="modal-title" id="newProjectModalTitle">
						请输入数据信息：
					</h4>
				</div>
				<div class="modal-body">
					<form id="addObservedValue">
						<table>
							<tr>
								<td>x1：</td> <td><input type="text" id="x1" size="20" value="0"/></td>
							</tr>
							<tr>
								<td >x2：</td> <td><input type="text" id="x2" size="20" value="0"/></td>
							</tr>
							<tr>
								<td >x3：</td> <td><input type="text" id="x3" size="20" value="0"/></td>
							</tr>
							<tr>
								<td>x4：</td> <td><input type="text" id="x4" size="20" value="0"/></td>
							</tr>
							<tr>
								<td>x5：</td> <td><input type="text" id="x5" size="20" value="0"/></td>
							</tr>
						</table>
					</form>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-default" data-dismiss="modal">关闭
					</button>
					<button type="button" class="btn btn-primary" onclick="addSample()">
						确认
					</button>
				</div>
			</div>
		</div>
	</div>
	<!-- 导入文件 -->
	<div class="modal fade" id="addselectfilemodal" tabindex="-1"
		role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal"
						aria-hidden="true">&times;</button>
					<h4 class="modal-title" id="myModalLabel">数据</h4>
				</div>
				<div class="modal-body" style="margin: auto;">
					<table style="margin-top: 10px; margin-left: 40px;">
							<tr>
								<td>导入文件：</td>
								<td>
									<form action="jsp/inputDataExcel" method="post"
										enctype="multipart/form-data" target="iframeInfo"
										onsubmit="return checkfile();">
										<input id="data-excel" accept="	application/vnd.ms-excel"
											type="file" name='file' value=""
											style="float: left; width: 190px" /> <input type="submit"
											id="import_button" class="btn btn-xs btn-primary" onclick="openwin()" value="导入" />
									</form><iframe name="iframeInfo" id="iframeInfo" style="display: none"></iframe>
								</td>
							</tr>
							<tr>
							<div id="spindiv"></div>
							</tr>
							<tr>
								<td colspan="2"
									style="text-align: center; horizon-align: middle;">
									&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
							</tr>
						</table>
				</div>
			</div>
		</div>
	</div>
	
	<!--另存为模态框-->
	<div class="modal fade" id="saveAsNewProjectModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<h4 class="modal-title" id="newProjectModalTitle">
						另存为一个新的项目
					</h4>
				</div>
				<div class="modal-body">
					<!-- <%--输入框组--%> -->
					<div class="input-group">
						<span class="input-group-addon">项目名：</span>
						<input type="text" class="form-control" placeholder="请输入项目名称" id="newProjectName">
					</div>
					<br>
					<div class="input-group">
						<span class="input-group-addon">备 注：</span>
						<input type="text" class="form-control" placeholder="请输入备注" id="newProjectRemark">
					</div>
					<br>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-default" data-dismiss="modal">关闭
					</button>
					<button type="button" class="btn btn-primary" id="addProButton" onclick="saveAsNewProject()">
						确认
					</button>
				</div>
			</div>
		</div>
	</div>
	<!--编辑模态框-->
	<div class="modal fade" id="updatedatainfo" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
					<h4 class="modal-title" id="myModalLabel">修改样本数目</h4>
				</div>
				<div class="modal-body" style="margin: auto;">
					<div id="spindivupdate"></div>
					<form id="updateprocesspop">
						<table style="width: 100%;font-size:13px" class="table table-striped table-bordered table-hover" id="modal-table">
							<input type="hidden" id="procedureId_u" name="procedureId" size="24" ></input>							
							<tr>
	                    		<td>x1：</td>
	                    		<td><input type="text" style="width:100%" id="x1_u"></input></td>  	                    		               		                		  
	                    	</tr>
	                    	<tr>
	                    		<td>x2：</td>
	                    		<td><input type="text" style="width:100%" id="x2_u"></input></td>                      		
	                    	</tr>  
	                    	<tr>
	                    		<td>x3：</td>
	                    		<td><input type="text" style="width:100%" id="x3_u"></input></td>                      		
	                    	</tr>
	                    	<tr>
	                    		<td>x4：</td>
	                    		<td><input type="text" style="width:100%" id="x4_u"></input></td>                      		
	                    	</tr> 
	                    	<tr>
	                    		<td>x5：</td>
	                    		<td><input type="text" style="width:100%" id="x5_u"></input></td>                      		
	                    	</tr>                 																						
						</table>
						<a class="btn btn-sm btn-info" style="" onclick="editItem()">
							<i class="ace-icon glyphicon glyphicon-ok bigger-120"></i> 提交
						</a>
					</form>
				</div>
			</div>
		</div>
	</div>
	<!--帮助页面-->
	<div id="helpHtml">
		  <div class="page-header">
				<h1>
					  Xbar-R App使用说明
				</h1>
		  </div>
		  <div class="alert alert-block alert-success" id="appHelp">
				<div class="helpClass">
					  <p class="helpP">
							<i class="ace-icon fa fa-check green"></i> <strong><big>使用流程：</big></strong><br />
								<strong>1、新建项目</strong><br />
								<img src="./img/1.png" width="650px" height="300px"><br />
								<strong>2、点击添加本数据</strong><br />
								<img src="./img/2.png" width="650px" height="300px"><br />
								<strong>3、点击计算</strong><br />
								<img src="./img/3.png" width="650px" height="300px"><br />
								<strong>4、点击保存</strong><br />
								<img src="./img/4.png" width="650px" height="300px"><br />	
								<strong>5、注意事项</strong><br />
								&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1.点另存为后需点击保存才能实际数据保存到数据库<br />
								&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2.点击计算后，再保存，否则Xbar-R图里表中数据有误<br />
					  <p>
				</div>
		  </div>
	</div>
</body>
</html>